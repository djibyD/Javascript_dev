<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Test ajax xhr</title>
		<style>
		  body {
			text-align: center;
		  }

		  #fileContent {
			margin-top: 100px;
		  }

		  #fileContent span {
			padding: 3px 6px;
			border: 1px solid #888;
			background-color: #DDD;
			-webkit-border-radius: 5px;
			-moz-border-radius: 5px;
			border-radius: 5px;
		  }
		</style>

	</head>
	
	<body>
		<p><strong>I am testing Ajax</strong></p>
		
		<p>Please choose which file you want to see the content</p>
		<p>
			<input type="button" value="file1.txt" />
			<input type="button" value="file2.txt" />
			<input type="button" value="error.txt" />
		</p>
		
		<p id="fileContent">
			<span>No file was loaded</span>
		</p>
		
		<script>
			function loadfile(file){
				var xhr = new XMLHttpRequest();
				xhr.open('GET', file);
				xhr.addEventListener('readystatechange', function(){
						if(xhr.readyState === 4 && xhr.status === 200){
							document.getElementById('fileContent').innerHTML = '<span>' + xhr.responseText + '</span>';
						} else if(xhr.readyState === 4 && xhr.status != 200){
							console.log("error : " + xhr.status);
						}
					});
				xhr.send(null);
			}
			
			(function (){
				var inputs = document.getElementsByTagName('input');
				var inputsLength = inputs.length;
				for(var i = 0; i < inputsLength; i++){
					inputs[i].addEventListener('click', function(){
						console.log("file name : " + this.value);
						loadfile(this.value);
					});
				}
				
			})();
		</script>
	</body>
</html>